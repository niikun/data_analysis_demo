# 企業クラスター分析アプリ

## 概要
企業情報を入力すると、4つのクラスターのどれに分類されるかを予測するStreamlitアプリです。

## 機能

### 1. 企業情報入力
サイドバーで以下の情報を入力：
- **基本情報**: 企業名、売上、従業員数、設立年
- **取引情報**: 過去取引回数、取引単価、顧客満足度
- **属性情報**: 業種、地域

### 2. クラスター予測
入力した企業情報を基に、4つのクラスターのうちどれに分類されるかを予測：

#### **Cluster 0: 中堅企業層** (平均626万円)
- 物流・医療・小売業中心
- 中部・九州地域に多い
- 安定した取引実績

#### **Cluster 1: 小規模企業層** (平均105万円)
- サービス・教育業中心
- 顧客満足度が最も高い
- 若い企業が多い

#### **Cluster 2: 大手企業層** (平均1,625万円)
- 建設・金融業中心
- 関東立地の老舗企業
- 最高水準の取引金額

#### **Cluster 3: 一般企業層** (平均416万円)
- 多様な業種
- 関東中心
- 標準的な取引パターン

### 3. 可視化機能
- **レーダーチャート**: 入力企業とクラスター平均の比較
- **棒グラフ**: 全クラスターの平均直近取引金額比較
- **統計テーブル**: 各クラスターの詳細統計

### 4. 予測結果
- 予想される直近取引金額
- クラスターの詳細説明
- 同じクラスターの特徴

## 使い方

### 1. アプリの起動
```bash
streamlit run cluster_app.py
```

### 2. ブラウザアクセス
- ローカル: http://localhost:8501
- 外部アクセス: http://0.0.0.0:8501

### 3. 企業情報入力
サイドバーの各項目に企業情報を入力

### 4. 予測実行
「🔍 クラスター予測」ボタンをクリック

### 5. 結果確認
- 予測されたクラスター
- 予想直近取引金額
- クラスター特性の比較

## ファイル構成

```
cluster_app.py          # メインアプリファイル
cluster_model.py        # モデル訓練・保存スクリプト
cluster_model.pkl       # 訓練済みK-meansモデル
scaler.pkl              # データ標準化スケーラー
feature_names.pkl       # 特徴量名リスト
cluster_stats.pkl       # クラスター統計情報
company_cluster_demo.csv # 元データ
```

## 技術仕様

### 使用ライブラリ
- **Streamlit**: Webアプリフレームワーク
- **scikit-learn**: 機械学習（K-means、StandardScaler）
- **pandas**: データ処理
- **plotly**: インタラクティブ可視化
- **joblib**: モデル保存・読み込み

### 機械学習手法
- **アルゴリズム**: K-means クラスタリング
- **クラスター数**: 4
- **特徴量**: 21変数（数値6 + 業種ダミー10 + 地域ダミー5）
- **前処理**: StandardScaler による標準化

### 予測精度
- シルエットスコア: 0.161
- 各クラスターは明確な企業特性を持つ

## カスタマイズ

### 新しいデータでの再訓練
```bash
python cluster_model.py
```

### アプリの設定変更
`cluster_app.py`の以下を編集：
- ページタイトル・アイコン
- 入力項目の範囲・デフォルト値
- クラスター解釈文
- 可視化スタイル

## 活用例

### 1. 営業戦略立案
- 新規顧客の取引金額予測
- 類似企業群の特定
- アプローチ手法の決定

### 2. リスク評価
- 企業の信用度判定
- 取引条件の設定
- ポートフォリオ分析

### 3. 市場分析
- 業界セグメンテーション
- 地域別企業特性の把握
- 競合分析

このアプリにより、企業の分類と取引金額予測を簡単に行うことができます。